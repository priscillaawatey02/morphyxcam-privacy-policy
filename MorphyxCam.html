<!DOCTYPE html>
<html>
<head>
    <script id="vertex-shader1" type="x-shader/x-vertex">
        #version 300 es
        precision highp float;
        precision highp int;

        in vec4 vPosition;
        in vec4 vColor;
        in vec2 vTexCoord;
        out vec4 fColor;
        out vec2 fTexCoord;
        
        uniform vec3 theta;

        void main()
        {
            // Compute the sines and cosines of theta for each of
            //   the three axes in one computation.
            vec3 angles = radians( theta );
            vec3 c = cos( angles );
            vec3 s = sin( angles );
        
            // Remeber: thse matrices are column-major
            mat4 rx = mat4( 1.0,  0.0,  0.0, 0.0,
            0.0,  c.x,  s.x, 0.0,
            0.0, -s.x,  c.x, 0.0,
            0.0,  0.0,  0.0, 1.0 );
        
            mat4 ry = mat4( c.y, 0.0, -s.y, 0.0,
            0.0, 1.0,  0.0, 0.0,
            s.y, 0.0,  c.y, 0.0,
            0.0, 0.0,  0.0, 1.0 );
        
            mat4 rz = mat4( c.z, -s.z, 0.0, 0.0,
            s.z,  c.z, 0.0, 0.0,
            0.0,  0.0, 1.0, 0.0,
            0.0,  0.0, 0.0, 1.0 );
        
            fColor = vColor;
            fTexCoord = vTexCoord;
            gl_Position = rz * ry * rx * vPosition;
        }
    </script>

    <script id="fragment-shader1" type="x-shader/x-fragment">
        #version 300 es
        precision highp float;
        precision highp int;

        in vec4 fColor;
        in vec2 fTexCoord;
        out vec4 fragmentColor;
        
        uniform sampler2D sampTexture;
        
        void
        main()
        {
            fragmentColor = fColor * texture( sampTexture, fTexCoord );
        }
    </script>

    <script id="vertex-shader2" type="x-shader/x-vertex">
        #version 300 es
        precision highp float;
        precision highp int;

        in vec4 vPosition;
        in vec2 vTexCoord;
        out vec2 fTexCoord;

        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;

        void main()
        {
            gl_Position = projectionMatrix * modelViewMatrix * vPosition;
            fTexCoord = vTexCoord;
        }
    </script>

    <script id="fragment-shader2" type="x-shader/x-fragment">
        #version 300 es
        precision highp float;
        precision highp int;

        in vec2 fTexCoord;
        out vec4 fragmentColor;
        uniform bool useBlack;
        uniform bool hasTexture;
        uniform sampler2D sampTexture;

        void main()
        {
            if (useBlack) {
                fragmentColor = vec4( 0.0, 0.0, 0.0, 1.0 );   // Black color
            } else if (!hasTexture) {
                fragmentColor = vec4( 0.0, 1.0, 0.0, 1.0 );   // Green color
            } else {
                fragmentColor = texture(sampTexture, fTexCoord);
            }
        }
    </script>

    <link type="text/css" rel="stylesheet" href="MorphyxCam.css" media="all" />
    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>
    <script type="text/javascript" src="MorphyxCam.js"></script>
    <script type="text/javascript" src="Filter.js"></script>
</head>

<body>
<div class="hdr-div">
<span style="font-size: 20px; font-weight: bold;">MorphyxCam</span>&nbsp;
<button id="allowcapture">Allow camera</button>
<button id="clearcapture">Clear capture</button>
</div>
<br>
<div class="camera">
  <video id="video">Video stream not available.</video>
  <button id="startcapture">Capture photo</button>
</div>

<canvas id="canvas1"></canvas>

<div id="box1" class="regBox">
<div id="sldrdiv" class="sldrBox">
<img id="photo" src="" alt="The screen capture will appear in this box." />
</div>

<div id="filters">
    <button id="normalBtn">Normal</button>
    <button id="grayscaleBtn">Grayscale</button>
    <button id="brightenBtn">Brighten</button>
    <button id="sepiaBtn">Sepia</button>
    <br />
    <button id="invertBtn">Invert Colors</button>
    <button id="cartoonBtn">Cartoonify</button>
    <button id="emojiOverlayBtn">Emoji Overlay</button>

</div>

<br>
Image Height: 0
<input id="imgheightsldr" type="range" min="0" max="0" step="1" value="0" /> 
<span id="imgheighttxt" style="background: #FFF">0</span><br>
Image Width: 0 
<input id="imgwidthsldr" type="range" min="0" max="0" step="1" value="0" /> 
<span id="imgwidthtxt" style="background: #FFF">0</span>
</span>
</div>

<div id="box2" class="regBox">
<canvas id="canvas2" width="320" height="320">
      Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
<br />
 <button id="rotatex">Rotate X</button>
 <button id="rotatey">Rotate Y</button>
 <button id="rotatez">Rotate Z</button>
 <button id="togglerot">Toggle</button>
</div>

<div id="box3" class="regBox">
<canvas id="canvas3" width="320" height="320">
      Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
</div>

</body>
</html>